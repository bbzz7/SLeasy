/*!
 * VERSION: 0.0.5
 * DATE: 2016-09-23
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2016, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 *
 * @author: Jack Doyle, jack@greensock.com
 */
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;!function(a){"use strict";var n,o,p,q,r,V,b=_gsScope.GreenSockGlobals||_gsScope,c=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,d=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,e=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,f=document,g="#4e7fff",h=1,i=Math.PI/180,j=Date.now||function(){return(new Date).getTime()},k=0,l=0,m=function(){k=j()},s={},t=[],u={},v=[],w=",",x=function(a){return f.createElementNS?f.createElementNS("http://www.w3.org/1999/xhtml",a):f.createElement(a)},y=function(a,b,c){var g,d=f.createElementNS("http://www.w3.org/2000/svg",a),e=/([a-z])([A-Z])/g;for(g in c)d.setAttributeNS(null,g.replace(e,"$1-$2").toLowerCase(),c[g]);return b.appendChild(d),d},z=function(a){var d,b=[],c=a._selectedAnchors;for(d=0;d<c.length;d++)b[d]=c[d].i;t.unshift({path:a,d:a.path.getAttribute("d"),transform:a.path.getAttribute("transform")||"",selectedIndexes:b}),t.length>30&&(t.length=30)},A=function(a){return(1e3*a|0)/1e3},B=function(a){return a=A(a),["M-"+a,-a,a,-a,a,a,-a,a+"z"].join(w)},C=function(a){var b=.552284749831,c=A(a*b);return a=A(a),"M"+a+",0C"+[a,c,c,a,0,a,-c,a,-a,c,-a,0,-a,-c,-c,-a,0,-a,c,-a,a,-c,a,0].join(w)+"z"},D=x("div"),E=!1,F=function(a){for(var b=a.split(","),c=(void 0!==D.onpointerdown?"pointerdown,pointermove,pointerup,pointercancel":void 0!==D.onmspointerdown?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":a).split(","),d={},e=8;--e>-1;)d[b[e]]=c[e],d[c[e]]=b[e];return d}("touchstart,touchmove,touchend,touchcancel"),G=function(a,b,c,d){a.addEventListener?a.addEventListener(F[b]||b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},H=function(a,b,c){a.removeEventListener?a.removeEventListener(F[b]||b,c):a.detachEvent&&a.detachEvent("on"+b,c)},I=function(a,b){for(var c=a.length;--c>-1;)if(a[c].identifier===b)return!0;return!1},J=function(a){E=a.touches&&_dragCount<a.touches.length,H(a.target,"touchend",J)},K=function(a){E=a.touches&&_dragCount<a.touches.length,G(a.target,"touchend",J)},L=function(b){a.console&&console.log(b)},M=function(a,b){var f,g,h,j,k,l,c=Math.ceil(Math.abs(b)/90),d=0,e=[];for(a*=i,b*=i,f=b/c,g=4/3*Math.sin(f/2)/(1+Math.cos(f/2)),l=0;c>l;l++)h=a+l*f,j=Math.cos(h),k=Math.sin(h),e[d++]=j-g*k,e[d++]=k+g*j,h+=f,j=Math.cos(h),k=Math.sin(h),e[d++]=j+g*k,e[d++]=k-g*j,e[d++]=j,e[d++]=k;return e},N=function(a,b,c,d,e,f,g,h,j){if(a!==h||b!==j){c=Math.abs(c),d=Math.abs(d);var k=e%360*i,l=Math.cos(k),m=Math.sin(k),n=(a-h)/2,o=(b-j)/2,p=l*n+m*o,q=-m*n+l*o,r=c*c,s=d*d,t=p*p,u=q*q,v=t/r+u/s;v>1&&(c=Math.sqrt(v)*c,d=Math.sqrt(v)*d,r=c*c,s=d*d);var w=f===g?-1:1,x=(r*s-r*u-s*t)/(r*u+s*t);0>x&&(x=0);var y=w*Math.sqrt(x),z=y*(c*q/d),A=y*-(d*p/c),B=(a+h)/2,C=(b+j)/2,D=B+(l*z-m*A),E=C+(m*z+l*A),F=(p-z)/c,G=(q-A)/d,H=(-p-z)/c,I=(-q-A)/d,J=Math.sqrt(F*F+G*G),K=F;w=0>G?-1:1;var L=w*Math.acos(K/J)*_RAD2DEG;J=Math.sqrt((F*F+G*G)*(H*H+I*I)),K=F*H+G*I,w=0>F*I-G*H?-1:1;var N=w*Math.acos(K/J)*_RAD2DEG;!g&&N>0?N-=360:g&&0>N&&(N+=360),N%=360,L%=360;var U,V,W,O=M(L,N),P=l*c,Q=m*c,R=m*-d,S=l*d,T=O.length-2;for(U=0;T>U;U+=2)V=O[U],W=O[U+1],O[U]=V*P+W*R+D,O[U+1]=V*Q+W*S+E;return O[O.length-2]=h,O[O.length-1]=j,O}},O=function(a){var k,l,m,n,o,p,q,r,s,t,u,v,w,b=(a+"").replace(e,function(a){var b=+a;return 1e-4>b&&b>-1e-4?0:b}).match(c)||[],d=[],f=0,g=0,h=b.length,i=2,j=0;if(!a||!isNaN(b[0])||isNaN(b[1]))return L("ERROR: malformed path data: "+a),d;for(k=0;h>k;k++)if(w=o,isNaN(b[k])?(o=b[k].toUpperCase(),p=o!==b[k]):k--,m=+b[k+1],n=+b[k+2],p&&(m+=f,n+=g),0===k&&(r=m,s=n),"M"===o)q&&q.length<8&&(d.length-=1,i=0),f=r=m,g=s=n,q=[m,n],j+=i,i=2,d.push(q),k+=2,o="L";else if("C"===o)q||(q=[0,0]),q[i++]=m,q[i++]=n,p||(f=g=0),q[i++]=f+1*b[k+3],q[i++]=g+1*b[k+4],q[i++]=f+=1*b[k+5],q[i++]=g+=1*b[k+6],k+=6;else if("S"===o)"C"===w||"S"===w?(t=f-q[i-4],u=g-q[i-3],q[i++]=f+t,q[i++]=g+u):(q[i++]=f,q[i++]=g),q[i++]=m,q[i++]=n,p||(f=g=0),q[i++]=f+=1*b[k+3],q[i++]=g+=1*b[k+4],k+=4;else if("Q"===o)t=m-f,u=n-g,q[i++]=f+2*t/3,q[i++]=g+2*u/3,p||(f=g=0),f+=1*b[k+3],g+=1*b[k+4],t=m-f,u=n-g,q[i++]=f+2*t/3,q[i++]=g+2*u/3,q[i++]=f,q[i++]=g,k+=4;else if("T"===o)t=f-q[i-4],u=g-q[i-3],q[i++]=f+t,q[i++]=g+u,t=f+1.5*t-m,u=g+1.5*u-n,q[i++]=m+2*t/3,q[i++]=n+2*u/3,q[i++]=f=m,q[i++]=g=n,k+=2;else if("H"===o)n=g,q[i++]=f+(m-f)/3,q[i++]=g+(n-g)/3,q[i++]=f+2*(m-f)/3,q[i++]=g+2*(n-g)/3,q[i++]=f=m,q[i++]=n,k+=1;else if("V"===o)n=m,m=f,p&&(n+=g-f),q[i++]=m,q[i++]=g+(n-g)/3,q[i++]=m,q[i++]=g+2*(n-g)/3,q[i++]=m,q[i++]=g=n,k+=1;else if("L"===o||"Z"===o)"Z"===o&&(m=r,n=s,q.closed=!0),("L"===o||Math.abs(f-m)>.5||Math.abs(g-n)>.5)&&(q[i++]=f+(m-f)/3,q[i++]=g+(n-g)/3,q[i++]=f+2*(m-f)/3,q[i++]=g+2*(n-g)/3,q[i++]=m,q[i++]=n,"L"===o&&(k+=2)),f=m,g=n;else if("A"===o){for(v=N(f,g,1*b[k+1],1*b[k+2],1*b[k+3],1*b[k+4],1*b[k+5],(p?f:0)+1*b[k+6],(p?g:0)+1*b[k+7]),l=0;l<v.length;l++)q[i++]=v[l];f=q[i-2],g=q[i-1],k+=7}else L("Error: malformed path data: "+a);return d.totalPoints=j+i,d},P=function(a,b,c,d,e,f,g,h,i,j,k){var B,l=(a+c)/2,m=(b+d)/2,n=(c+e)/2,o=(d+f)/2,p=(e+g)/2,q=(f+h)/2,r=(l+n)/2,s=(m+o)/2,t=(n+p)/2,u=(o+q)/2,v=(r+t)/2,w=(s+u)/2,x=g-a,y=h-b,z=Math.abs((c-g)*y-(d-h)*x),A=Math.abs((e-g)*y-(f-h)*x);return j||(j=[a,b,g,h],k=2),j.splice(k||j.length-2,0,v,w),(z+A)*(z+A)>i*(x*x+y*y)&&(B=j.length,P(a,b,l,m,r,s,v,w,i,j,k),P(v,w,t,u,p,q,g,h,i,j,k+2+(j.length-B))),j},Q=function(a,b,c,d){a=T(a,b);var n,o,p,q,r,s,t,u,v,w,x,y,z,B,e=a.length-2,f=+a[0],g=+a[1],h=+a[2],i=+a[3],j=[f,g,f,g],k=h-f,l=i-g,m=1e3;for(isNaN(c)&&(c=Math.PI/10),d=d||0===d?.4*+d:.4,r=2;e>r;r+=2)n=f,o=g,f=h,g=i,h=+a[r+2],i=+a[r+3],s=k,u=l,k=h-f,l=i-g,t=h-n,v=i-o,y=s*s+u*u,z=k*k+l*l,B=t*t+v*v,p=Math.acos((y+z-B)/Math.sqrt(4*y*z)),x=p/Math.PI*d,w=Math.sqrt(y)*x,x*=Math.sqrt(z),p>c?(q=Math.atan2(v,t),j.push(((f-Math.cos(q)*w)*m|0)/m,((g-Math.sin(q)*w)*m|0)/m,(f*m|0)/m,(g*m|0)/m,((f+Math.cos(q)*x)*m|0)/m,((g+Math.sin(q)*x)*m|0)/m)):(q=Math.atan2(u,s),j.push(((f-Math.cos(q)*w)*m|0)/m,((g-Math.sin(q)*w)*m|0)/m),q=Math.atan2(l,k),j.push((f*m|0)/m,(g*m|0)/m,((f+Math.cos(q)*x)*m|0)/m,((g+Math.sin(q)*x)*m|0)/m));return j.push(A(h),A(i),A(h),A(i)),j},R=function(a,b,c,d,e,f){var i,g=e-c,h=f-d;return(g||h)&&(i=((a-c)*g+(b-d)*h)/(g*g+h*h),i>1?(c=e,d=f):i>0&&(c+=g*i,d+=h*i)),g=a-c,h=b-d,g*g+h*h},S=function(a,b,c,d,e){var k,l,m,f=d,g=a[b],h=a[b+1],i=a[c],j=a[c+1];for(l=b+2;c>l;l+=2)m=R(a[l],a[l+1],g,h,i,j),m>f&&(k=l,f=m);f>d&&(k-b>2&&S(a,b,k,d,e),e.push(a[k],a[k+1]),c-k>2&&S(a,k,c,d,e))},T=function(a,b){var g,h,i,j,k,l,m,c=parseFloat(a[0]),d=parseFloat(a[1]),e=[c,d],f=a.length-2;for(b=b||1,b*=b,g=2;f>g;g+=2)h=parseFloat(a[g]),i=parseFloat(a[g+1]),j=c-h,k=d-i,j*j+k*k>b&&(e.push(h,i),c=h,d=i);return e.push(parseFloat(a[f]),parseFloat(a[f+1])),m=e.length-2,l=[e[0],e[1]],S(e,0,m,b,l),l.push(e[m],e[m+1]),l},U=function(a,b,c){var e,f,g,h,i,j,k,l,m,n,o,p,d=1e3;return e=a[b],f=a[b+1],g=a[b+2],h=a[b+3],i=a[b+4],j=a[b+5],k=a[b+6],l=a[b+7],m=e+(g-e)*c,o=g+(i-g)*c,m+=(o-m)*c,o+=(i+(k-i)*c-o)*c,n=f+(h-f)*c,p=h+(j-h)*c,n+=(p-n)*c,p+=(j+(l-j)*c-p)*c,a.splice(b+2,4,((e+(g-e)*c)*d|0)/d,((f+(h-f)*c)*d|0)/d,(m*d|0)/d,(n*d|0)/d,((m+(o-m)*c)*d|0)/d,((n+(p-n)*c)*d|0)/d,(o*d|0)/d,(p*d|0)/d,((i+(k-i)*c)*d|0)/d,((j+(l-j)*c)*d|0)/d),a},W=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var r,s,t,u,v,w,o=(e-d)/f,p=0,q=d;for(V=9999800001;e>=q;)w=1-q,r=w*w*w*g+3*w*w*q*i+3*w*q*q*k+q*q*q*m,s=w*w*w*h+3*w*w*q*j+3*w*q*q*l+q*q*q*n,u=r-b,v=s-c,t=u*u+v*v,V>t&&(V=t,p=q),q+=o;return a>1?W(a-1,b,c,Math.max(p-o,0),Math.min(p+o,1),f,g,h,i,j,k,l,m,n):p},X=function(a,b,c,d,e){d=d||20,e=e||3;var j,k,f=c.length,g=9999800001,h=0,i=0;for(k=0;f>k;k+=6)j=W(1,a,b,0,1,d,c[k],c[k+1],c[k+2],c[k+3],c[k+4],c[k+5],c[k+6],c[k+7]),g>V&&(g=V,h=j,i=k);return j=W(e,a,b,h-.05,h+.05,d,c[i],c[i+1],c[i+2],c[i+3],c[i+4],c[i+5],c[i+6],c[i+7]),U(c,i,j),i+6},Y=function(a,b){return function(c){a.call(b,c)}};SVGElement.prototype.getTransformToElement=SVGElement.prototype.getTransformToElement||function(a){return a.getScreenCTM().inverse().multiply(this.getScreenCTM())};var Z=function(a){var d,e,b=this,c=b.target.parentNode.getScreenCTM();this._matrix=this.target.transform.baseVal.getItem(0).matrix,this._ctm=c.inverse(),F[a.type]?(d=-1!==a.type.indexOf("touch")?a.currentTarget||a.target:f,G(d,"touchend",b._onRelease),G(d,"touchmove",b._onMove),G(d,"touchcancel",b._onRelease),G(f,"touchstart",K)):(d=null,G(f,"mousemove",b._onMove)),G(f,"mouseup",b._onRelease),a.preventDefault(),a.preventManipulation&&a.preventManipulation(),a.changedTouches?(a=b.touch=a.changedTouches[0],b.touchID=a.identifier):a.pointerId?b.touchID=a.pointerId:b.touch=b.touchID=null,b._startPointerY=b.pointerY=a.pageY,b._startPointerX=b.pointerX=a.pageX,b._startElementX=b._matrix.e,b._startElementY=b._matrix.f,1===this._ctm.a&&0===this._ctm.b&&0===this._ctm.c&&1===this._ctm.d?this._ctm=null:(e=b._startPointerX*this._ctm.a+b._startPointerY*this._ctm.c+this._ctm.e,b._startPointerY=b._startPointerX*this._ctm.b+b._startPointerY*this._ctm.d+this._ctm.f,b._startPointerX=e),b.isPressed=l=!0,b.touchEventTarget=d,b.vars.onPress&&b.vars.onPress.call(b.vars.callbackScope||b,b.pointerEvent)},$=function(a){var d,e,b=this,c=a;if(b._enabled&&!E&&b.isPressed&&a){if(b.pointerEvent=a,d=a.changedTouches){if(a=d[0],a!==b.touch&&a.identifier!==b.touchID){for(e=d.length;--e>-1&&(a=d[e]).identifier!==b.touchID;);if(0>e)return}}else if(a.pointerId&&b.touchID&&a.pointerId!==b.touchID)return;c.preventDefault(),c.preventManipulation&&c.preventManipulation(),b.setPointerPosition(a.pageX,a.pageY),b.vars.onDrag&&b.vars.onDrag.call(b.vars.callbackScope||b,b.pointerEvent)}},_=function(a,b){var c=this;if(c._enabled&&c.isPressed&&(!a||null==c.touchID||b||!(a.pointerId&&a.pointerId!==c.touchID||a.changedTouches&&!I(a.changedTouches,c.touchID)))){m(),c.isPressed=l=!1;var h,i,d=a,e=c.isDragging,g=c.touchEventTarget;if(g?(H(g,"touchend",c._onRelease),H(g,"touchmove",c._onMove),H(g,"touchcancel",c._onRelease),H(f,"touchstart",K)):H(f,"mousemove",c._onMove),H(f,"mouseup",c._onRelease),a&&a.target&&H(a.target,"mouseup",c._onRelease),e?c.isDragging=!1:c.vars.onClick&&c.vars.onClick.call(c.vars.callbackScope||c,d),a){if(h=a.changedTouches,h&&(a=h[0],a!==c.touch&&a.identifier!==c.touchID)){for(i=h.length;--i>-1&&(a=h[i]).identifier!==c.touchID;);if(0>i)return}c.pointerEvent=d,c.pointerX=a.pageX,c.pointerY=a.pageY}return d&&!e&&c.vars.onDragRelease?c.vars.onDragRelease.call(c,c.pointerEvent):(d&&(d.preventDefault(),d.preventManipulation&&d.preventManipulation()),c.vars.onRelease&&c.vars.onRelease.call(c.vars.callbackScope||c,c.pointerEvent)),e&&c.vars.onDragEnd&&c.vars.onDragEnd.call(c.vars.callbackScope||c,c.pointerEvent),!0}},aa=function(a,b){this.target="string"==typeof a?f.querySelectorAll(a)[0]:a,this.vars=b||{},this._onPress=Y(Z,this),this._onMove=Y($,this),this._onRelease=Y(_,this),this.target.setAttribute("transform",(this.target.getAttribute("transform")||"")+" translate(0,0)"),this._matrix=this.target.transform.baseVal.getItem(0).matrix,this.x=this._matrix.e,this.y=this._matrix.f,this.snap=b.snap,isNaN(b.maxX)&&isNaN(b.minX)?this._bounds=0:(this._bounds=1,this.maxX=+b.maxX,this.minX=+b.minX),this.enabled(!0)},ba=aa.prototype;ba.setPointerPosition=function(a,b){var c,d,e,f,g;this.pointerX=a,this.pointerY=b,this._ctm&&(g=a*this._ctm.a+b*this._ctm.c+this._ctm.e,b=a*this._ctm.b+b*this._ctm.d+this._ctm.f,a=g),d=b-this._startPointerY,c=a-this._startPointerX,h>d&&d>-h&&(d=0),h>c&&c>-h&&(c=0),e=Math.round(this._startElementX+c),f=Math.round(this._startElementY+d),this.snap&&!p&&(u.x=e,u.y=f,this.snap.call(this,u),e=u.x,f=u.y),(this.x!==e||this.y!==f)&&(this._matrix.f=this.y=f,this._matrix.e=this.x=e,!this.isDragging&&this.isPressed&&(this.isDragging=!0,this.vars.onDragStart&&this.vars.onDragStart.call(this.vars.callbackScope||this,this.pointerEvent)))},ba.enabled=function(a){if(!arguments.length)return this._enabled;var b;return this._enabled=a,a?(G(this.target,"mousedown",this._onPress),G(this.target,"touchstart",this._onPress),G(this.target,"click",this._onClick,!0)):(b=this.isDragging,H(this.target,"mousedown",this._onPress),H(this.target,"touchstart",this._onPress),H(this.target,"click",this._onClick),this.touchEventTarget&&(H(this.touchEventTarget,"touchcancel",this._onRelease),H(this.touchEventTarget,"touchend",this._onRelease),H(this.touchEventTarget,"touchmove",this._onMove)),H(f,"mouseup",this._onRelease),H(f,"mousemove",this._onMove),this.isDragging=this.isPressed=!1,b&&this.vars.onDragEnd&&this.vars.onDragEnd.call(this.vars.callbackScope||this,this.pointerEvent)),this},ba.endDrag=function(a){this._onRelease(a)};var ca=function(a,b,c,d){this.smooth=b&&b<c.length-2&&Math.abs((c[b+1]-c[b-1])/(c[b]-c[b-2])-(c[b+3]-c[b+1])/(c[b+2]-c[b]))<.05?2:0,this.element=y("path",a._selection,{d:this.smooth?a._circleHandle:a._squareHandle,transform:"translate("+c[b]+","+c[b+1]+")",fill:g,stroke:g,strokeWidth:2,vectorEffect:"non-scaling-stroke"}),this.element._gsSelection=!0,this.i=b,this.segment=c,this.vars=d||{},this._draggable=new aa(this.element,{callbackScope:this,onDrag:this.onDrag,snap:this.vars.snap,onPress:this.onPress,onRelease:this.onRelease,onClick:this.onClick,onDragEnd:this.onDragEnd})},da=function(a,b,c){var f,d=a.length,e=[];for(f=0;d>f;f+=6)e.push(new ca(b,f,a,c));return e},ea=function(a,b,c){var d=a[c]-a[b],e=a[c+1]-a[b+1];return Math.sqrt(d*d+e*e)};ba=ca.prototype,ba.onPress=function(){this.vars.onPress.call(this.vars.callbackScope||this,this)},ba.onClick=function(){this.vars.onClick.call(this.vars.callbackScope||this,this)},ba.onDrag=function(){var a=this.segment;this.vars.onDrag.call(this.vars.callbackScope||this,this,this._draggable.x-a[this.i],this._draggable.y-a[this.i+1])},ba.onDragEnd=function(){this.vars.onDragEnd.call(this.vars.callbackScope||this,this)},ba.onRelease=function(){this.vars.onRelease.call(this.vars.callbackScope||this,this)};var fa=b.PathEditor=function(a,b){b=b||{},this.vars=b,this.path="string"==typeof a?f.querySelectorAll(a)[0]:a,this._selectionHittest=y("path",this.path.ownerSVGElement,{stroke:"transparent",strokeWidth:14,fill:"none",vectorEffect:"non-scaling-stroke"}),this._selection=b._selection||y("g",this.path.ownerSVGElement),this._selectionPath=y("path",this._selection,{stroke:g,strokeWidth:2,fill:"none",vectorEffect:"non-scaling-stroke"}),this._selectedAnchors=[],this._line1=y("polyline",this._selection,{stroke:g,strokeWidth:2,vectorEffect:"non-scaling-stroke"}),this._line2=y("polyline",this._selection,{stroke:g,strokeWidth:2,vectorEffect:"non-scaling-stroke"}),this._line1.style.pointerEvents=this._line2.style.pointerEvents=this._selectionPath.style.pointerEvents="none",this._enabled=!0;var c=this.path.parentNode.getScreenCTM().inverse(),d=(c.a+c.d)/2*4;this._squareHandle=B(d),this._circleHandle=C(d+.5),this._handle1=y("path",this._selection,{d:this._squareHandle,fill:g,stroke:"transparent",strokeWidth:2}),this._handle2=y("path",this._selection,{d:this._squareHandle,fill:g,stroke:"transparent",strokeWidth:2}),this._handle1._draggable=new aa(this._handle1,{onDrag:this._onDragHandle1,callbackScope:this,onPress:this._onPressHandle1,onRelease:this._onReleaseHandle,onClick:this._onClickHandle1,snap:b.handleSnap}),this._handle2._draggable=new aa(this._handle2,{onDrag:this._onDragHandle2,callbackScope:this,onPress:this._onPressHandle2,onRelease:this._onReleaseHandle,onClick:this._onClickHandle2,snap:b.handleSnap}),this._handle1.style.visibility=this._handle2.style.visibility="hidden";for(var e=[this._handle1,this._handle2,this._line1,this._line2,this._selection,this._selectionPath,this._selectionHittest],h=e.length;--h>-1;)e[h]._gsSelection=!0;b.draggable!==!1&&(this._draggable=new aa(this._selectionHittest,{callbackScope:this,onPress:this.select,onRelease:this._onRelease,onDrag:this._onDragPath,onDragEnd:this._saveState,maxX:this.vars.maxX,minX:this.vars.minX})),this.init(),this._selection.style.visibility=b.selected===!1?"hidden":"visible",b.selected!==!1&&ga.push(this),this._saveState(),G(this._selectionHittest,"mousedown",Y(this._onClickSelectionPath,this)),G(this._selectionHittest,"touchstart",Y(this._onClickSelectionPath,this)),G(this._selectionHittest,"mouseup",Y(this._onRelease,this)),G(this._selectionHittest,"touchend",Y(this._onRelease,this))},ga=[];ba=fa.prototype,ba._onRelease=function(a){var b=this._editingAnchor;b&&(s.x=b.segment[b.i],s.y=b.segment[b.i+1]),this.vars.onRelease&&this.vars.onRelease.call(this,a)},ba.init=function(){var c,d,a=this.path.getAttribute("d"),b={callbackScope:this,snap:this.vars.anchorSnap,onDrag:this._onDragAnchor,onPress:this._onPressAnchor,onRelease:this._onRelease,onClick:this._onClickAnchor,onDragEnd:this._onDragEndAnchor,maxX:this.vars.maxX,minX:this.vars.minX};if(this._anchors&&this._anchors.length){for(d=0;d<this._anchors.length;d++)this._anchors[d].element.parentNode.removeChild(this._anchors[d].element),this._anchors[d]._draggable.enabled(!1);this._selectedAnchors.length=0}if(this._bezier=O(a),this._anchors=da(this._bezier[0]||[],this,b),c=this._bezier.length,c>1)for(d=1;c>d;d++)this._anchors=this._anchors.concat(da(this._bezier[d],this,b));this._selection.appendChild(this._handle1),this._selection.appendChild(this._handle2),this._selectedAnchors.length=0,this._selectionPath.setAttribute("d",a),this._selectionHittest.setAttribute("d",a),this._selection.setAttribute("transform",this.path.getAttribute("transform")||"translate(0,0)"),this._selectionHittest.setAttribute("transform",this._selection.getAttribute("transform")),this._updateAnchors()},ba._saveState=function(){z(this)},ba._onClickSelectionPath=function(a){if("hidden"===this._selection.style.visibility)this.select();else if(o){var e,f,g,h,i,b={callbackScope:this,snap:this.vars.anchorSnap,onDrag:this._onDragAnchor,onPress:this._onPressAnchor,onRelease:this._onRelease,onClick:this._onClickAnchor,onDragEnd:this._onDragEndAnchor,maxX:this.vars.maxX,minX:this.vars.minX},c=this._bezier[0],d=this._selection.getScreenCTM().inverse();for(this._draggable&&this._draggable._onRelease(a),d&&(h=a.clientX*d.a+a.clientY*d.c+d.e,i=a.clientX*d.b+a.clientY*d.d+d.f),e=X(h,i,c),f=0;f<this._anchors.length;f++)this._anchors[f].i>=e&&(this._anchors[f].i+=6);g=new ca(this,e,c,b),this._selection.appendChild(this._handle1),this._selection.appendChild(this._handle2),g._draggable._onPress(a),r=g,this._anchors.push(g),this._selectedAnchors.length=0,this._selectedAnchors.push(g),this._updateAnchors(),this.update(),this._saveState()}},ba._onClickHandle1=function(){var a=this._editingAnchor,b=a.i,c=a.segment;o&&Math.abs(c[b]-c[b-2])<5&&Math.abs(c[b+1]-c[b-1])<5&&this._onClickAnchor(a)},ba._onClickHandle2=function(){var a=this._editingAnchor,b=a.i,c=a.segment;o&&Math.abs(c[b]-c[b+2])<5&&Math.abs(c[b+1]-c[b+3])<5&&this._onClickAnchor(a)},ba._onDragEndAnchor=function(a){r=null,this._saveState()},ba.isSelected=function(){return this._selectedAnchors.length>0},ba.select=function(a){if(this._selection.style.visibility="visible",this._editingAnchor=null,this.path._gsSelection=!0,a===!0)for(var b=this._anchors.length;--b>-1;)this._selectedAnchors[b]=this._anchors[b];-1===ga.indexOf(this)&&ga.push(this),this._updateAnchors()},ba.deselect=function(){this._selection.style.visibility="hidden",this._selectedAnchors.length=0,this._editingAnchor=null,this.path._gsSelection=!1,ga.splice(ga.indexOf(this),1),this._updateAnchors()},ba._onDragPath=function(a){var b=this._selectionHittest.getAttribute("transform")||"translate(0,0)";this._selection.setAttribute("transform",b),this.path.setAttribute("transform",b)},ba._onPressAnchor=function(a){-1===this._selectedAnchors.indexOf(a)?(p||(this._selectedAnchors.length=0),this._selectedAnchors.push(a)):p&&(this._selectedAnchors.splice(this._selectedAnchors.indexOf(a),1),a._draggable.endDrag()),s.x=a.segment[a.i],s.y=a.segment[a.i+1],this._updateAnchors()},ba._deleteSelectedAnchors=function(){for(var c,d,e,a=this._selectedAnchors,b=a.length;--b>-1;)for(c=a[b],c.element.parentNode.removeChild(c.element),c._draggable.enabled(!1),d=c.i,d?d<c.segment.length-2?c.segment.splice(d-2,6):c.segment.splice(d-4,6):c.segment.splice(d,6),a.splice(b,1),this._anchors.splice(this._anchors.indexOf(c),1),e=0;e<this._anchors.length;e++)this._anchors[e].i>=d&&(this._anchors[e].i-=6);this._updateAnchors(),this.update(),this._saveState()},ba._onClickAnchor=function(a){var e,f,g,h,i,j,b=a.i,c=a.segment,d=1e3;o&&r!==a&&this._editingAnchor?(a.smooth=!a.smooth,a.element.setAttribute("d",a.smooth?this._circleHandle:this._squareHandle),a.smooth&&b&&b<c.length-2?(e=Math.atan2(c[b+1]-c[b-1],c[b]-c[b-2]),f=Math.atan2(c[b+3]-c[b+1],c[b+2]-c[b]),e=(e+f)/2,g=ea(c,b-2,b),h=ea(c,b,b+2),.2>g&&(g=ea(c,b,b-6)/4,e=f||Math.atan2(c[b+7]-c[b-5],c[b+6]-c[b-6])),.2>h&&(h=ea(c,b,b+6)/4,f=e||Math.atan2(c[b+7]-c[b-5],c[b+6]-c[b-6])),i=Math.sin(e),j=Math.cos(e),Math.abs(f-e)<Math.PI/2&&(i=-i,j=-j),c[b-2]=((c[b]+j*g)*d|0)/d,c[b-1]=((c[b+1]+i*g)*d|0)/d,c[b+2]=((c[b]-j*h)*d|0)/d,c[b+3]=((c[b+1]-i*h)*d|0)/d,this._updateAnchors(),this.update(),this._saveState()):a.smooth||(b&&(c[b-2]=c[b],c[b-1]=c[b+1]),b<c.length-2&&(c[b+2]=c[b],c[b+3]=c[b+1]),this._updateAnchors(),this.update(),this._saveState())):p||(this._selectedAnchors.length=0,this._selectedAnchors.push(a)),r=null,this._updateAnchors()},ba._updateAnchors=function(){var c,d,e,a=1===this._selectedAnchors.length?this._selectedAnchors[0]:null,b=a?a.segment:null;for(this._editingAnchor=a,c=0;c<this._anchors.length;c++)this._anchors[c].element.setAttribute("fill",-1!==this._selectedAnchors.indexOf(this._anchors[c])?g:"white");a&&(this._handle1.setAttribute("d",a.smooth?this._circleHandle:this._squareHandle),this._handle2.setAttribute("d",a.smooth?this._circleHandle:this._squareHandle)),c=a?a.i:0,a&&c?(d=b[c-2],e=b[c-1],this._handle1.style.visibility=this._line1.style.visibility=o||d!==b[c]||e!==b[c+1]?"visible":"hidden",this._handle1.setAttribute("transform","translate("+d+w+e+")"),this._line1.setAttribute("points",d+w+e+w+b[c]+w+b[c+1])):this._handle1.style.visibility=this._line1.style.visibility="hidden",a&&c<b.length-2?(d=b[c+2],e=b[c+3],this._handle2.style.visibility=this._line2.style.visibility=o||d!==b[c]||e!==b[c+1]?"visible":"hidden",this._handle2.setAttribute("transform","translate("+d+w+e+")"),this._line2.setAttribute("points",b[c]+w+b[c+1]+w+d+w+e)):this._handle2.style.visibility=this._line2.style.visibility="hidden"},ba._onPressAlt=function(){var a=this._editingAnchor;a&&(a.i&&(this._handle1.style.visibility=this._line1.style.visibility="visible"),a.i<a.segment.length-2&&(this._handle2.style.visibility=this._line2.style.visibility="visible"))},ba._onReleaseAlt=function(){var b,c,a=this._editingAnchor;a&&(b=a.segment,c=a.i,b[c]===b[c-2]&&b[c+1]===b[c-1]&&(this._handle1.style.visibility=this._line1.style.visibility="hidden"),b[c]===b[c+2]&&b[c+1]===b[c+3]&&(this._handle2.style.visibility=this._line2.style.visibility="hidden"))},ba._onPressHandle1=function(){this._editingAnchor.smooth&&(this._oppositeHandleLength=ea(this._editingAnchor.segment,this._editingAnchor.i,this._editingAnchor.i+2))},ba._onPressHandle2=function(){this._editingAnchor.smooth&&(this._oppositeHandleLength=ea(this._editingAnchor.segment,this._editingAnchor.i-2,this._editingAnchor.i))},ba._onReleaseHandle=function(a){this._onRelease(a),this._saveState()},ba._onDragHandle1=function(){var g,a=this._editingAnchor,b=a.segment,c=a.i,d=1e3,e=this._handle1._draggable.x,f=this._handle1._draggable.y;b[c-2]=e=(e*d|0)/d,b[c-1]=f=(f*d|0)/d,a.smooth&&(o?(a.smooth=!1,a.element.setAttribute("d",this._squareHandle),this._handle1.setAttribute("d",this._squareHandle),this._handle2.setAttribute("d",this._squareHandle)):(g=Math.atan2(b[c+1]-f,b[c]-e),e=this._oppositeHandleLength*Math.cos(g),f=this._oppositeHandleLength*Math.sin(g),b[c+2]=((b[c]+e)*d|0)/d,b[c+3]=((b[c+1]+f)*d|0)/d)),this.update()},ba._onDragHandle2=function(){var g,a=this._editingAnchor,b=a.segment,c=a.i,d=1e3,e=this._handle2._draggable.x,f=this._handle2._draggable.y;b[c+2]=e=(e*d|0)/d,b[c+3]=f=(f*d|0)/d,a.smooth&&(o?(a.smooth=!1,a.element.setAttribute("d",this._squareHandle),this._handle1.setAttribute("d",this._squareHandle),this._handle2.setAttribute("d",this._squareHandle)):(g=Math.atan2(b[c+1]-f,b[c]-e),e=this._oppositeHandleLength*Math.cos(g),f=this._oppositeHandleLength*Math.sin(g),b[c-2]=((b[c]+e)*d|0)/d,b[c-1]=((b[c+1]+f)*d|0)/d)),this.update()},ba._onDragAnchor=function(a,b,c){var g,h,i,j,d=this._selectedAnchors,e=d.length,f=1e3;for(h=0;e>h;h++)j=d[h],g=j.i,i=j.segment,g&&(i[g-2]=((i[g-2]+b)*f|0)/f,i[g-1]=((i[g-1]+c)*f|0)/f),i[g]=((i[g]+b)*f|0)/f,i[g+1]=((i[g+1]+c)*f|0)/f,g<i.length-2&&(i[g+2]=((i[g+2]+b)*f|0)/f,i[g+3]=((i[g+3]+c)*f|0)/f),j!==a&&j.element.setAttribute("transform","translate("+i[g]+w+i[g+1]+")");this.update()},ba.enabled=function(a){if(!arguments.length)return this._enabled;for(var b=this._anchors.length;--b>-1;)this._anchors[b]._draggable.enabled(a);this._enabled=a,this._handle1._draggable.enabled(a),this._handle2._draggable.enabled(a),this._draggable&&this._draggable.enabled(a),a?this._selection.parentNode||(this.path.ownerSVGElement.appendChild(this._selectionHittest),this.path.ownerSVGElement.appendChild(this._selection),this.init(),this._saveState()):(this.deselect(),this.path.ownerSVGElement.removeChild(this._selectionHittest),this.path.ownerSVGElement.removeChild(this._selection)),this._updateAnchors(),this.update()},ba.update=function(){var c,d,e,f,a="",b=this._editingAnchor;for(b&&(c=b.i,d=b.segment,c&&(e=d[c-2],f=d[c-1],this._handle1.setAttribute("transform","translate("+e+w+f+")"),this._line1.setAttribute("points",e+w+f+w+d[c]+w+d[c+1])),c<d.length-2&&(e=d[c+2],f=d[c+3],this._handle2.setAttribute("transform","translate("+e+w+f+")"),this._line2.setAttribute("points",d[c]+w+d[c+1]+w+e+w+f))),c=0;c<this._bezier.length;c++)d=this._bezier[c],d.length>7&&(a+="M"+d[0]+w+d[1]+"C"+d.slice(2).join(w));this.path.setAttribute("d",a),this._selectionPath.setAttribute("d",a),this._selectionHittest.setAttribute("d",a),this.vars.onUpdate&&this._enabled&&this.vars.onUpdate.call(this,a)},ba.getNormalizedSVG=function(a,b,c,d){var l,m,n,o,p,q,e=this._bezier[0],f=-1*e[0],g=0===b?0:-(b||e[1]),h=e.length,i=1/(e[h-2]+f),j=-a||e[h-1]+g,k=1e3;for(v.length=0,j=j?1/j:-i,i*=k,j*=k,m=0;h>m;m+=2)v[m]=((e[m]+f)*i|0)/k,v[m+1]=((e[m+1]+g)*j|0)/k;if(d){for(l=[],h=v.length,m=2;h>m;m+=6)n=v[m-2],o=v[m-1],p=v[m+4],q=v[m+5],l.push(n,o,p,q),P(n,o,v[m],v[m+1],v[m+2],v[m+3],p,q,.001,l,l.length-2);for(n=l[0],h=l.length,m=2;h>m;m+=2){if(p=l[m],n>p||p>1||0>p){d();break}n=p}}return c&&8===h&&0===v[0]&&0===v[1]&&1===v[h-2]&&1===v[h-1]?v.slice(2,6).join(","):(v[2]="C"+v[2],"M"+v.join(","))};var ha=function(a){if(!a.target._gsSelection&&!l&&j()-k>100){for(var b=ga.length;--b>-1;)ga[b].deselect();ga.length=0}};f.addEventListener("keydown",function(a){var b,c,d,e;if(16===a.which)p=!0;else if(17===a.which)n=!0;else if(91===a.which)q=!0;else if(18===a.which)for(o=!0,b=ga.length;--b>-1;)ga[b]._onPressAlt();else if(90===a.which&&(n||q)&&t.length>1){if(t.shift(),c=t[0]){for(e=c.path,e.path.setAttribute("d",c.d),e.path.setAttribute("transform",c.transform),e.init(),d=e._anchors,b=0;b<d.length;b++)-1!==c.selectedIndexes.indexOf(d[b].i)&&e._selectedAnchors.push(d[b]);e._updateAnchors(),e.update(),e.vars.onUndo&&e.vars.onUndo.call(e)}}else if(8===a.which||46===a.which)for(b=ga.length;--b>-1;)ga[b]._deleteSelectedAnchors();else if(65===a.which&&(q||n))for(b=ga.length;--b>-1;)ga[b].select(!0)}),f.addEventListener("keyup",function(a){if(16===a.which)p=!1;else if(17===a.which)n=!1;else if(91===a.which)q=!1;else if(18===a.which){o=!1;for(var b=ga.length;--b>-1;)ga[b]._onReleaseAlt()}}),G(f,"mouseup",ha),G(f,"touchend",ha),fa.version="0.0.5",fa.simplifyPoints=T,fa.pointsToBezier=Q,fa.simplifySVG=function(a,b){var c,e,g,h,j,k,l,m,n,o,p,q;if(b=b||{},o=b.tolerance||1,n=b.precision||1/o,q=(void 0===b.cornerThreshold?18:+b.cornerThreshold)*i,"string"!=typeof a&&(c=a,a=c.getAttribute("d")),("#"===a.charAt(0)||"."===a.charAt(0))&&(c=f.querySelector(a),c&&(a=c.getAttribute("d"))),e=b.curved!==!1||/[achqstvz]/gi.test(a)?O(a)[0]:a.match(d),b.curved!==!1){for(m=e,e=[],p=m.length,g=2;p>g;g+=6)h=+m[g-2],k=+m[g-1],j=+m[g+4],l=+m[g+5],e.push(A(h),A(k),A(j),A(l)),P(h,k,+m[g],+m[g+1],+m[g+2],+m[g+3],j,l,1/(2e5*n),e,e.length-2);e=Q(e,o,q,b.curviness),e[2]="C"+e[2]}else e=T(e,o);return a="M"+e.join(","),c&&c.setAttribute("d",a),a},fa.create=function(a,b){return new fa(a,b)},fa.getCubicSVGData=function(a){var f,g,h,i,b="",c=O(a),d=c.length,e=1e3;for(g=0;d>g;g++){for(i=c[g],b+="M"+i[0]+","+i[1]+" C",f=i.length,h=2;f>h;h++)b+=(i[h++]*e|0)/e+","+(i[h++]*e|0)/e+" "+(i[h++]*e|0)/e+","+(i[h++]*e|0)/e+" "+(i[h++]*e|0)/e+","+(i[h]*e|0)/e+" ";i.closed&&(b+="z")}return b},fa.editingAxis=s,fa.getSnapFunction=function(a){var b=a.radius||2,c=999999999999,d=a.x||0===a.x?a.x:a.width?0:-c,e=a.y||0===a.y?a.y:a.height?0:-c,f=d+(a.width||c*c),g=e+(a.height||c*c),h=a.containX!==!1,i=a.containY!==!1,j=a.axis,k=a.gridSize;return b*=b,function(a){var m,n,o,p,c=a.x,l=a.y;h&&d>c||(o=c-d)*o<b?c=d:(h&&c>f||(o=f-c)*o<b)&&(c=f),i&&e>l||(p=l-e)*p<b?l=e:(i&&l>g||(p=g-l)*p<b)&&(l=g),j&&(o=c-j.x,p=l-j.y,b>o*o&&(c=j.x),b>p*p&&(l=j.y)),k&&(m=d+Math.round((c-d)/k)*k,o=m-c,n=e+Math.round((l-e)/k)*k,p=n-l,b>o*o+p*p&&(c=m,l=n)),a.x=c,a.y=l}}}(_gsScope),function(a){"use strict";var b=function(){return(_gsScope.GreenSockGlobals||_gsScope)[a]};"function"==typeof define&&define.amd?define([],b):"undefined"!=typeof module&&module.exports&&(module.exports=b())}("PathEditor");